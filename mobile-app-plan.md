# VoiceFit Mobile App - Expo/React Native Implementation Plan

## Current Status: Phase 1 Complete ✅

**Last Updated:** Jan 22, 2026

### Completed
- Monorepo structure (apps/web, apps/mobile, packages/shared)
- Expo SDK 54 app running in Expo Go
- NativeWind v4 + Tailwind CSS configured
- Clerk Expo SDK integrated
- 5-tab navigation with all screen scaffolds
- Voice recording hook, API client, interpretation sheets

### Notes
- Mobile app excluded from bun workspace (uses npm separately)
- Shared package linked via `file:../../packages/shared`

---                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                               
  ## Summary                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                               
  Create a React Native/Expo mobile app with full feature parity to the existing Next.js web app, in a monorepo structure with shared code.                                                                                                                                    
                                                                                                                                                                                                                                                                               
  ## Requirements Captured                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                               
  | Requirement | Decision |                                                                                                                                                                                                                                                   
  |-------------|----------|                                                                                                                                                                                                                                                   
  | Project Structure | Monorepo (Expo app alongside Next.js) |                                                                                                                                                                                                                
  | Backend | Reuse existing Next.js API routes |                                                                                                                                                                                                                              
  | Auth | Clerk Expo SDK (same accounts across platforms) |                                                                                                                                                                                                                   
  | Offline Support | Basic caching for viewing, sync when online |                                                                                                                                                                                                            
  | Design | Native feel (iOS/Android navigation patterns) |                                                                                                                                                                                                                   
  | Health Integration | HealthKit (iOS) + Health Connect (Android) |                                                                                                                                                                                                          
  | Voice Recording | Tap to start/stop (not hold) |                                                                                                                                                                                                                           
  | Deployment | EAS Build + TestFlight/Play Console |                                                                                                                                                                                                                         
  | Feature Scope | Full feature parity |                                                                                                                                                                                                                                      
  | Push Notifications | Not for initial release |                                                                                                                                                                                                                             
  | Dev Accounts | Neither Apple nor Google set up yet |                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                               
  ---                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  ## 1. Monorepo Folder Structure                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                               
  ```                                                                                                                                                                                                                                                                          
  voicefit/                                                                                                                                                                                                                                                                    
  ├── apps/                                                                                                                                                                                                                                                                    
  │   ├── web/                    # Existing Next.js app (moved from root)                                                                                                                                                                                                     
  │   │   ├── app/                                                                                                                                                                                                                                                             
  │   │   ├── components/                                                                                                                                                                                                                                                      
  │   │   ├── lib/                                                                                                                                                                                                                                                             
  │   │   └── package.json                                                                                                                                                                                                                                                     
  │   │                                                                                                                                                                                                                                                                        
  │   └── mobile/                 # New Expo app                                                                                                                                                                                                                               
  │       ├── app/                # Expo Router routes                                                                                                                                                                                                                         
  │       ├── components/         # Mobile-specific components                                                                                                                                                                                                                 
  │       ├── hooks/              # Mobile-specific hooks                                                                                                                                                                                                                      
  │       ├── lib/                # Mobile utilities                                                                                                                                                                                                                           
  │       ├── tw/                 # NativeWind CSS wrappers                                                                                                                                                                                                                    
  │       ├── app.json                                                                                                                                                                                                                                                         
  │       ├── eas.json                                                                                                                                                                                                                                                         
  │       └── package.json                                                                                                                                                                                                                                                     
  │                                                                                                                                                                                                                                                                            
  ├── packages/                                                                                                                                                                                                                                                                
  │   └── shared/                 # Shared code                                                                                                                                                                                                                                
  │       ├── types/              # TypeScript types                                                                                                                                                                                                                           
  │       ├── validations/        # Zod schemas                                                                                                                                                                                                                                
  │       ├── constants/          # Meal types, exercises, etc.                                                                                                                                                                                                                
  │       └── package.json                                                                                                                                                                                                                                                     
  │                                                                                                                                                                                                                                                                            
  ├── prisma/                     # Keep at root (used by web)                                                                                                                                                                                                                 
  ├── package.json                # Root workspace config                                                                                                                                                                                                                      
  └── bun.workspace.yaml          # Bun workspace config                                                                                                                                                                                                                       
  ```                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  ---                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  ## 2. Mobile App Route Structure                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                               
  ```                                                                                                                                                                                                                                                                          
  apps/mobile/app/                                                                                                                                                                                                                                                             
  ├── _layout.tsx               # Root: ClerkProvider, QueryClient, Theme                                                                                                                                                                                                      
  ├── (auth)/                                                                                                                                                                                                                                                                  
  │   ├── _layout.tsx                                                                                                                                                                                                                                                          
  │   └── sign-in.tsx           # OAuth sign-in (Google, Apple)                                                                                                                                                                                                                
  │                                                                                                                                                                                                                                                                            
  ├── (tabs)/                   # Main app tabs                                                                                                                                                                                                                                
  │   ├── _layout.tsx           # NativeTabs configuration                                                                                                                                                                                                                     
  │   │                                                                                                                                                                                                                                                                        
  │   ├── (home)/               # Dashboard tab with stack                                                                                                                                                                                                                     
  │   │   ├── _layout.tsx       # Stack navigator                                                                                                                                                                                                                              
  │   │   └── index.tsx         # Dashboard screen                                                                                                                                                                                                                             
  │   │                                                                                                                                                                                                                                                                        
  │   ├── (meals)/              # Meals tab with stack                                                                                                                                                                                                                         
  │   │   ├── _layout.tsx       # Stack navigator                                                                                                                                                                                                                              
  │   │   ├── index.tsx         # Meals list                                                                                                                                                                                                                                   
  │   │   └── [id].tsx          # Meal detail (optional)                                                                                                                                                                                                                       
  │   │                                                                                                                                                                                                                                                                        
  │   ├── (workouts)/           # Workouts tab with stack                                                                                                                                                                                                                      
  │   │   ├── _layout.tsx       # Stack navigator                                                                                                                                                                                                                              
  │   │   ├── index.tsx         # Workouts list                                                                                                                                                                                                                                
  │   │   ├── [id].tsx          # Workout session detail                                                                                                                                                                                                                       
  │   │   └── new.tsx           # New workout session                                                                                                                                                                                                                          
  │   │                                                                                                                                                                                                                                                                        
  │   ├── (metrics)/            # Metrics tab with stack                                                                                                                                                                                                                       
  │   │   ├── _layout.tsx                                                                                                                                                                                                                                                      
  │   │   └── index.tsx         # Weight/steps history                                                                                                                                                                                                                         
  │   │                                                                                                                                                                                                                                                                        
  │   └── (settings)/           # Settings tab with stack                                                                                                                                                                                                                      
  │       ├── _layout.tsx                                                                                                                                                                                                                                                      
  │       └── index.tsx         # Settings page                                                                                                                                                                                                                                
  │                                                                                                                                                                                                                                                                            
  └── +not-found.tsx                                                                                                                                                                                                                                                           
  ```                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  ### Tab Bar Configuration                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                               
  5 tabs using NativeTabs with SF Symbols (iOS) / Material Icons (Android):                                                                                                                                                                                                    
  1. **Home** (house.fill) - Dashboard                                                                                                                                                                                                                                         
  2. **Meals** (fork.knife) - Meal logs                                                                                                                                                                                                                                        
  3. **Workouts** (dumbbell.fill) - Workout sessions                                                                                                                                                                                                                           
  4. **Metrics** (chart.line.uptrend.xyaxis) - Steps/weight                                                                                                                                                                                                                    
  5. **Settings** (gearshape.fill) - User settings                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                               
  ---                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  ## 3. Shared Code Strategy                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                               
  ### Can Be Shared (`packages/shared/`)                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                               
  | File | Content |                                                                                                                                                                                                                                                           
  |------|---------|                                                                                                                                                                                                                                                           
  | `types/index.ts` | DashboardData, MealInterpretation, WorkoutSetInterpretation, ApiResponse |                                                                                                                                                                              
  | `validations/index.ts` | All Zod schemas (createMealSchema, etc.) |                                                                                                                                                                                                        
  | `constants/exercises.ts` | EXERCISE_NAMES array (73 exercises) |                                                                                                                                                                                                           
  | `constants/meal-types.ts` | MealType enum |                                                                                                                                                                                                                                
  | `utils/date.ts` | Pure date formatting functions |                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                               
  ### Cannot Be Shared                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                               
  - React components (different renderers)                                                                                                                                                                                                                                     
  - Hooks (different platform APIs)                                                                                                                                                                                                                                            
  - API helpers (NextResponse vs fetch)                                                                                                                                                                                                                                        
  - Styling (CSS classes need NativeWind)                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                               
  ---                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  ## 4. Key Mobile Components                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                               
  | Component | Purpose | Native Approach |                                                                                                                                                                                                                                    
  |-----------|---------|-----------------|                                                                                                                                                                                                                                    
  | `ConversationInput` | Voice/text input | expo-audio + BottomSheet |                                                                                                                                                                                                        
  | `MealInterpretationSheet` | Review meal before save | @gorhom/bottom-sheet |                                                                                                                                                                                               
  | `WorkoutInterpretationSheet` | Review workout set | @gorhom/bottom-sheet |                                                                                                                                                                                                 
  | `MetricInterpretationSheet` | Review weight/steps | @gorhom/bottom-sheet |                                                                                                                                                                                                 
  | `TodaySummaryCard` | Circular progress | react-native-progress |                                                                                                                                                                                                           
  | `WeeklyTrendsChart` | 8-day line charts | victory-native |                                                                                                                                                                                                                 
  | `MealCard` | Swipeable meal item | react-native-gesture-handler |                                                                                                                                                                                                          
  | `WorkoutSessionCard` | Swipeable workout item | react-native-gesture-handler |                                                                                                                                                                                             
  | `MicRecordButton` | Tap-to-record button | Animated with Reanimated |                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                               
  ---                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  ## 5. Voice Recording Implementation                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                               
  Using `expo-audio` (NOT expo-av):                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                               
  ```tsx                                                                                                                                                                                                                                                                       
  // hooks/use-voice-recorder.ts                                                                                                                                                                                                                                               
  import { useAudioRecorder, RecordingPresets, AudioModule } from 'expo-audio';                                                                                                                                                                                                
                                                                                                                                                                                                                                                                               
  export function useVoiceRecorder() {                                                                                                                                                                                                                                         
  const audioRecorder = useAudioRecorder(RecordingPresets.HIGH_QUALITY);                                                                                                                                                                                                       
  // Tap to start, tap to stop                                                                                                                                                                                                                                                 
  // Returns recording URI for upload to /api/transcribe                                                                                                                                                                                                                       
  }                                                                                                                                                                                                                                                                            
  ```                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  **Flow:**                                                                                                                                                                                                                                                                    
  1. User taps mic button → start recording                                                                                                                                                                                                                                    
  2. User taps again → stop recording, get URI                                                                                                                                                                                                                                 
  3. Upload audio to `/api/transcribe` (existing API)                                                                                                                                                                                                                          
  4. Get transcript → send to `/api/interpret/entry`                                                                                                                                                                                                                           
  5. Show interpretation in bottom sheet for review                                                                                                                                                                                                                            
  6. User confirms → save via `/api/meals` or `/api/workout-sets`                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                               
  ---                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  ## 6. Health Integration                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                               
  ### iOS (HealthKit)                                                                                                                                                                                                                                                          
  - Use `react-native-health` package                                                                                                                                                                                                                                          
  - Request StepCount read permission                                                                                                                                                                                                                                          
  - Sync steps on app launch and pull-to-refresh                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                               
  ### Android (Health Connect)                                                                                                                                                                                                                                                 
  - Use `react-native-health-connect` package                                                                                                                                                                                                                                  
  - Request Steps read permission                                                                                                                                                                                                                                              
  - Same sync behavior as iOS                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                               
  ```tsx                                                                                                                                                                                                                                                                       
  // hooks/use-health-steps.ts                                                                                                                                                                                                                                                 
  export function useHealthSteps(date: string) {                                                                                                                                                                                                                               
  // Platform-specific implementation                                                                                                                                                                                                                                          
  // Returns { steps, isLoading, hasPermission, requestPermission }                                                                                                                                                                                                            
  }                                                                                                                                                                                                                                                                            
  ```                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  ---                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
## 7. Authentication Flow

Using `@clerk/clerk-expo` with `expo-secure-store` for token storage:

```tsx
// app/_layout.tsx
<ClerkProvider tokenCache={secureStoreCache}>
<AuthGate>
<QueryClientProvider>
<Slot />
</QueryClientProvider>
</AuthGate>
</ClerkProvider>
```

Sign-in options:
- Continue with Google (OAuth)
- Continue with Apple (iOS only)

Expo Go OAuth redirect (implemented):
- Added `expo-auth-session` and use `AuthSession.makeRedirectUri({ path: "oauth-native-callback" })`.
- Clerk must allow the dev redirect URL (example):
  - `exp://<LAN-IP>:<PORT>/--/oauth-native-callback`
- For dev builds/standalone, also allow:
  - `voicefit://oauth-native-callback`

Notes:
- `apps/mobile/app.json` includes `owner` for a stable Expo project identity.
- OAuth flow uses `WebBrowser.openAuthSessionAsync` via Clerk; do not use the Expo AuthSession proxy URL directly.

---
                                                                                                                                                                                                                                                                               
  ## 8. Offline Caching Strategy                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                               
  Using `expo-sqlite` with React Query:                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                               
  1. **Read-through cache**: Check SQLite before API call                                                                                                                                                                                                                      
  2. **Write-through cache**: Update SQLite after successful API response                                                                                                                                                                                                      
  3. **Stale-while-revalidate**: Show cached data, fetch fresh in background                                                                                                                                                                                                   
  4. **Pending mutations**: Queue writes when offline, sync when online                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                               
  ```tsx                                                                                                                                                                                                                                                                       
  // lib/storage.ts                                                                                                                                                                                                                                                            
  import * as SQLite from 'expo-sqlite';                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                               
  // Tables: cache, pending_mutations                                                                                                                                                                                                                                          
  // TTL-based expiration for cached data                                                                                                                                                                                                                                      
  ```                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  ---                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  ## 9. API Communication                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                               
  Mobile app calls existing Next.js API routes deployed on **Vercel** with Clerk token:                                                                                                                                                                                        
                                                                                                                                                                                                                                                                               
  ```tsx                                                                                                                                                                                                                                                                       
  // lib/api-client.ts                                                                                                                                                                                                                                                         
  // EXPO_PUBLIC_API_URL = your Vercel deployment URL (e.g., https://voicefit.vercel.app)                                                                                                                                                                                      
  const API_BASE_URL = process.env.EXPO_PUBLIC_API_URL;                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                               
  export async function apiRequest(endpoint, options, token) {                                                                                                                                                                                                                 
  return fetch(`${API_BASE_URL}${endpoint}`, {                                                                                                                                                                                                                                 
  headers: { Authorization: `Bearer ${token}`, ...options.headers },                                                                                                                                                                                                           
  ...options,                                                                                                                                                                                                                                                                  
  });                                                                                                                                                                                                                                                                          
  }                                                                                                                                                                                                                                                                            
  ```                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  **Note:** No backend changes needed - mobile calls the same `/api/*` routes as the web app.                                                                                                                                                                                  
                                                                                                                                                                                                                                                                               
  **Key Endpoints:**                                                                                                                                                                                                                                                           
  - `POST /api/transcribe` - Audio transcription                                                                                                                                                                                                                               
  - `POST /api/interpret/entry` - Intent classification                                                                                                                                                                                                                        
  - `POST /api/interpret/meal` - Meal interpretation                                                                                                                                                                                                                           
  - `POST /api/interpret/workout-set` - Workout interpretation                                                                                                                                                                                                                 
  - `GET/POST /api/meals` - Meal CRUD                                                                                                                                                                                                                                          
  - `GET/POST /api/workout-sessions` - Workout CRUD                                                                                                                                                                                                                            
  - `GET /api/dashboard` - Dashboard data                                                                                                                                                                                                                                      
  - `GET/POST /api/daily-metrics` - Steps/weight                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                               
  ---                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  ## 10. Dependencies                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  ```json                                                                                                                                                                                                                                                                      
  {                                                                                                                                                                                                                                                                            
  "dependencies": {                                                                                                                                                                                                                                                            
  "expo": "~52.0.0",                                                                                                                                                                                                                                                           
  "expo-router": "~4.0.0",                                                                                                                                                                                                                                                     
  "expo-audio": "~1.0.0",                                                                                                                                                                                                                                                      
  "expo-symbols": "~0.2.0",                                                                                                                                                                                                                                                    
  "expo-secure-store": "~14.0.0",                                                                                                                                                                                                                                              
  "expo-sqlite": "~15.0.0",                                                                                                                                                                                                                                                    
  "@clerk/clerk-expo": "^2.0.0",                                                                                                                                                                                                                                               
  "@tanstack/react-query": "^5.0.0",                                                                                                                                                                                                                                           
  "@gorhom/bottom-sheet": "^5.0.0",                                                                                                                                                                                                                                            
  "react-native-reanimated": "~3.16.0",                                                                                                                                                                                                                                        
  "react-native-gesture-handler": "~2.20.0",                                                                                                                                                                                                                                   
  "nativewind": "5.0.0-preview.2",                                                                                                                                                                                                                                             
  "react-native-css": "0.0.0-nightly.5ce6396",                                                                                                                                                                                                                                 
  "tailwindcss": "^4.0.0",                                                                                                                                                                                                                                                     
  "@tailwindcss/postcss": "^4.0.0",                                                                                                                                                                                                                                            
  "victory-native": "^41.0.0",                                                                                                                                                                                                                                                 
  "react-native-progress": "^5.0.0",                                                                                                                                                                                                                                           
  "react-native-health": "^1.18.0",                                                                                                                                                                                                                                            
  "react-native-health-connect": "^3.0.0",                                                                                                                                                                                                                                     
  "@react-native-community/netinfo": "^11.0.0"                                                                                                                                                                                                                                 
  }                                                                                                                                                                                                                                                                            
  }                                                                                                                                                                                                                                                                            
  ```                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  ---                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  ## 11. Implementation Phases                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                               
  ### Phase 1: Project Setup ✅
  - [x] Create monorepo structure with Bun workspaces
  - [x] Move Next.js app to `apps/web/`
  - [x] Initialize Expo app in `apps/mobile/`
  - [x] Create shared package with types/validations
  - [x] Set up NativeWind + Tailwind CSS v4
  - [x] Configure Clerk Expo SDK
  - [x] Create basic NativeTabs navigation                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                               
  ### Phase 2: Core Infrastructure                                                                                                                                                                                                                                             
  - [ ] Implement API client with auth                                                                                                                                                                                                                                         
  - [ ] Set up React Query with offline support                                                                                                                                                                                                                                
  - [ ] Create SQLite cache layer                                                                                                                                                                                                                                              
  - [ ] Build base UI components                                                                                                                                                                                                                                               
  - [ ] Implement auth flow (sign-in/sign-out)                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                               
  ### Phase 3: Dashboard & Voice Input                                                                                                                                                                                                                                         
  - [ ] Build TodaySummaryCard                                                                                                                                                                                                                                                 
  - [ ] Implement WeeklyTrendsChart                                                                                                                                                                                                                                            
  - [ ] Create ConversationInput component                                                                                                                                                                                                                                     
  - [ ] Implement voice recording (expo-audio)                                                                                                                                                                                                                                 
  - [ ] Connect to transcription/interpretation APIs                                                                                                                                                                                                                           
  - [ ] Build interpretation bottom sheets                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                               
  ### Phase 4: Feature Pages                                                                                                                                                                                                                                                   
  - [ ] Meals list with date navigation                                                                                                                                                                                                                                        
  - [ ] Meal logging with voice                                                                                                                                                                                                                                                
  - [ ] Workouts list page                                                                                                                                                                                                                                                     
  - [ ] Workout session detail                                                                                                                                                                                                                                                 
  - [ ] New workout session flow                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                               
  ### Phase 5: Health & Settings                                                                                                                                                                                                                                               
  - [ ] HealthKit integration (iOS)                                                                                                                                                                                                                                            
  - [ ] Health Connect integration (Android)                                                                                                                                                                                                                                   
  - [ ] Auto-sync steps                                                                                                                                                                                                                                                        
  - [ ] Settings page (goals, account)                                                                                                                                                                                                                                         
  - [ ] Metrics history page                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                               
  ### Phase 6: Polish & Deploy                                                                                                                                                                                                                                                 
  - [ ] Loading skeletons and animations                                                                                                                                                                                                                                       
  - [ ] Error boundaries                                                                                                                                                                                                                                                       
  - [ ] Offline indicator                                                                                                                                                                                                                                                      
  - [ ] App icons and splash screen                                                                                                                                                                                                                                            
  - [ ] EAS Build configuration                                                                                                                                                                                                                                                
  - [ ] TestFlight submission                                                                                                                                                                                                                                                  
  - [ ] Play Console submission                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                               
  ---                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  ## 12. Critical Files to Reference                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                                               
  | File | Purpose |                                                                                                                                                                                                                                                           
  |------|---------|                                                                                                                                                                                                                                                           
  | `lib/types.ts` | Core TypeScript types to share |                                                                                                                                                                                                                          
  | `lib/validations.ts` | Zod schemas to share |                                                                                                                                                                                                                              
  | `lib/exercises.ts` | Exercise names array to share |                                                                                                                                                                                                                       
  | `components/conversation-input.tsx` | Voice flow reference |                                                                                                                                                                                                               
  | `hooks/use-voice-recorder.ts` | Recording pattern reference |                                                                                                                                                                                                              
  | `app/api/dashboard/route.ts` | API contract reference |                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                               
  ---                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                               
  ## 13. Verification Plan                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                               
  1. **Auth Flow**: Sign in with Google/Apple, verify token persists across app restarts                                                                                                                                                                                       
  2. **Voice Recording**: Record voice, verify transcription returns, verify interpretation shows                                                                                                                                                                              
  3. **Meal Logging**: Log meal via voice, verify appears in meals list and dashboard                                                                                                                                                                                          
  4. **Workout Logging**: Log workout set, verify appears in workout detail                                                                                                                                                                                                    
  5. **Health Sync**: Connect HealthKit/Health Connect, verify steps appear in dashboard                                                                                                                                                                                       
  6. **Offline Mode**: Disable network, verify cached dashboard displays, verify meals list shows cached data                                                                                                                                                                  
  7. **Cross-Platform**: Test same account on web and mobile, verify data syncs                                                                                                                                                                                                
                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                               
  If you need specific details from before exiting plan mode (like exact code snippets, error messages, or content you generated), read the full transcript at:                                                                                                                
  /Users/samarth/.claude/projects/-Users-samarth-Desktop-Work-code-voicefit/21924564-7f30-4302-8c0e-23f5ea3e604a.jsonl
